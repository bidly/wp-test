!function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1)},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=n(2),u=(n.n(l),n(3)),s=(n.n(u),function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()),c=wp.i18n.__,p=wp.blocks.registerBlockType,h=wp.editor.InspectorControls,b=wp.components,m=b.PanelBody,f=(b.TextareaControl,b.TextControl),d=b.ToggleControl,w=b.Button,g=wp.element,x=g.Component,y=(g.Fragment,g.createElement);wp.compose.withState;p("maxbuttons/maxbuttons-block",{title:c("MaxButtons Block"),icon:y("img",{src:mb_gutenberg.icon_url,width:20}),category:"common",keywords:[c("maxbuttons-block"),c("maxbuttons")],attributes:{id:{type:"string"},url:{type:"string",attribute:"url"},text:{type:"string",attribute:"text"},text2:{type:"string"},newwindow:{type:"boolean"},relnofollow:{type:"boolean"},tooltip:{type:"string"}},edit:function(t){function e(t){a(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onChangeID=n.onChangeID.bind(n),n.onChangeText=n.onChangeText.bind(n),n.onChangeText2=n.onChangeText2.bind(n),n.onChangeURL=n.onChangeURL.bind(n),n.onChangeTooltip=n.onChangeTooltip.bind(n),n.updateNewWindow=n.updateToggleAttribute("newwindow"),n.updateRelNoFollow=n.updateToggleAttribute("relnofollow"),n.preventClick=n.preventClick.bind(n),n.ajaxButton=n.ajaxButton.bind(n),n.openButtonModal=n.openButtonModal.bind(n),n.insertButton=n.insertButton.bind(n),n.state={stylefile:"",isPro:!1},n.button,n.limitajax,n}return r(e,t),s(e,[{key:"componentDidMount",value:function(){this.props.attributes.id&&this.ajaxButton(),mb_gutenberg.ispro&&this.setState({isPro:!0})}},{key:"ajaxButton",value:function(t){clearTimeout(this.limitajax);var e=this;e.limitajax=setTimeout(function(){var n=e.props.attributes,o=n.id,a=n.text,i=n.text2,r=n.url,l=n.tooltip,u=n.newwindow,s=n.relnofollow,c=n.className;wp.ajax.send("maxajax",{data:{plugin_action:"gutenberg_button",nonce:maxajax.nonce,id:o,text:a,text2:i,url:r,linktitle:l,newwindow:u,relnofollow:s,extraclass:c,reset:t},success:function(t){e.button=t.button,e.setState({stylefile:t.style}),t.attributes&&e.props.setAttributes(t.attributes)},error:function(t){}})},700)}},{key:"preventClick",value:function(t){return t.preventDefault(),!1}},{key:"onChangeText",value:function(t){this.props.setAttributes({text:t}),this.ajaxButton()}},{key:"onChangeText2",value:function(t){this.props.setAttributes({text2:t}),this.ajaxButton()}},{key:"onChangeTooltip",value:function(t){this.props.setAttributes({tooltip:t}),this.ajaxButton()}},{key:"onChangeURL",value:function(t){this.props.setAttributes({url:t}),this.ajaxButton()}},{key:"onChangeID",value:function(t){this.props.setAttributes({id:t}),this.ajaxButton(!0)}},{key:"updateToggleAttribute",value:function(t){var e=this;return function(){var n=e.props.attributes[t];(0,e.props.setAttributes)(o({},t,!n))}}},{key:"openButtonModal",value:function(){var t={};t.callback=this.insertButton,t.useShortCodeOptions=!1,this.maxmedia=new window.maxFoundry.maxMedia,this.maxmedia.init(t),this.maxmedia.openModal()}},{key:"insertButton",value:function(t,e){this.onChangeID(t),this.maxmedia.close()}},{key:"render",value:function(){var t=this.props,e=t.attributes,n=(t.setAttributes,t.className);return[wp.element.createElement(h,{key:"mb_inspector"},wp.element.createElement(m,{title:c("Button Settings")},wp.element.createElement(w,{className:"modal-button",isLarge:"true",onClick:this.openButtonModal}," Select Button "),wp.element.createElement("h4",null,"Button ID : ",e.id),wp.element.createElement(f,{label:c("Text"),value:e.text,onChange:this.onChangeText,help:c("You can change the text of the Button.")}),this.state.isPro?wp.element.createElement(f,{label:c("Text2"),value:e.text2,onChange:this.onChangeText2}):null,wp.element.createElement(f,{label:c("URL"),value:e.url,onChange:this.onChangeURL,help:c("You can enter an alternative URL")}),wp.element.createElement(d,{label:c("Open in New Window"),checked:e.newwindow,onChange:this.updateNewWindow}),wp.element.createElement(d,{label:c('Use rel="nofollow"'),checked:e.relnofollow,onChange:this.updateRelNoFollow}),wp.element.createElement(f,{label:c("Tooltip"),value:e.tooltip,onChange:this.onChangeTooltip}))),wp.element.createElement("div",{className:n,key:"mb_block"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:this.button},onClick:this.preventClick}),wp.element.createElement("link",{rel:"stylesheet",href:this.state.stylefile}),this.button?wp.element.createElement("div",null):wp.element.createElement("div",null,"To start, add a MaxButton via the Block Settings on the right."))]}}]),e}(x),save:function(t){return null}})},function(t,e){},function(t,e){}]);